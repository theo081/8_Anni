<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>8-month Anniversary Slideshow</title>
<style>
  body, html {
    margin: 0; padding: 0;
    height: 100%;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  #hedlinecontainer {
    position: fixed;
    top: 20px;
    width: 100%;
    text-align: center;
    z-index: 50;
    pointer-events: none;
  }

  #shine {
    font-size: 60px;
    font-weight: bold;
    color: rgba(255, 0, 102, 0.3);
    background: linear-gradient(90deg, #222 0%, #fff 50%, #222 100%);
    background-size: 150px;
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    animation: shine 10s infinite;
    text-shadow: 0 0 15px rgba(233, 85, 189, 0.4);
  }

  @keyframes shine {
    0%, 10% {
      background-position: -1000px 0;
    }
    20% {
      background-position: 0 0;
    }
    90% {
      background-position: 1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  /* Slideshow container */
  #slideshow {
    width: 500px;
    height: 500px;
    position: relative;
    overflow: hidden;
    border: 12px solid #f2f2f2;
    border-radius: 20px;
    box-shadow: 0 0 20px #ff0066aa;
    background: #222;
    user-select: none;
  }

  #slideshow img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    user-select: none;
  }

  #tapOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.75);
    color: #ff0066;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 3rem;
    font-weight: bold;
    z-index: 60;
    user-select: none;
  }
  #tapOverlay:hover {
    cursor: pointer;
    color: #ff3399;
  }
</style>
</head>
<body>

<div id="hedlinecontainer">
  <div id="shine">ðŸ’ž Happy 8-month Mumu ðŸ’ž</div>
</div>

<div id="slideshow"></div>

<div id="tapOverlay">Tap to Start</div>

<audio id="bgMusic" src="song.mp3" preload="auto" loop></audio>

<script>
  const totalImages = 84;
  const imageFolder = './images/';
  const imageExtension = '.jpeg'; // Adjust if needed
  const slideshow = document.getElementById('slideshow');
  const tapOverlay = document.getElementById('tapOverlay');
  const bgMusic = document.getElementById('bgMusic');
  const transitionDuration = 1500; // 1.5s fade+slide

  let currentIndex = 0;
  let images = [];
  let isRunning = false;

  // Create 2 image elements to toggle between
  function createImageElements() {
    for(let i=0; i<2; i++) {
      const img = document.createElement('img');
      slideshow.appendChild(img);
      images.push(img);
    }
  }

  // Transition patterns for next and prev
  // For next: slide in from right, out to left
  // For prev: slide in from left, out to right
  const transitionNext = {
    enterStart: 'translateX(100%)',
    enterEnd: 'translateX(0)',
    exitEnd: 'translateX(-100%)',
  };

  const transitionPrev = {
    enterStart: 'translateX(-100%)',
    enterEnd: 'translateX(0)',
    exitEnd: 'translateX(100%)',
  };

  function showImage(nextIndex, direction) {
    if(nextIndex === currentIndex) return; // no change

    const currentImg = images[0];
    const nextImg = images[1];
    let t;

    if(direction === 'next') {
      t = transitionNext;
    } else if(direction === 'prev') {
      t = transitionPrev;
    } else {
      t = transitionNext; // fallback
    }

    // Set next image src and initial styles
    nextImg.src = `${imageFolder}${nextIndex + 1}${imageExtension}`;
    nextImg.style.transition = 'none';
    nextImg.style.opacity = '0';
    nextImg.style.transform = t.enterStart;

    // Force reflow to apply initial styles
    void nextImg.offsetWidth;

    // Animate next image sliding in + fade in
    nextImg.style.transition = `transform ${transitionDuration}ms ease, opacity ${transitionDuration}ms ease`;
    nextImg.style.opacity = '1';
    nextImg.style.transform = t.enterEnd;

    // Animate current image sliding out + fade out
    currentImg.style.transition = `transform ${transitionDuration}ms ease, opacity ${transitionDuration}ms ease`;
    currentImg.style.opacity = '0';
    currentImg.style.transform = t.exitEnd;

    // Swap images so next becomes current
    images.reverse();

    currentIndex = nextIndex;
  }

  function startSlideshow() {
    if(isRunning) return;
    isRunning = true;
    tapOverlay.style.display = 'none';
    bgMusic.play().catch(() => {
      console.log('Autoplay prevented, waiting for user interaction...');
    });

    // Show first image immediately
    images[0].src = `${imageFolder}1${imageExtension}`;
    images[0].style.opacity = '1';
    images[0].style.transform = 'translateX(0)';
    currentIndex = 0;
  }

  // Handle tap/click to go prev/next based on x position
  function handleClick(event) {
    if(!isRunning) {
      startSlideshow();
      return;
    }

    const rect = slideshow.getBoundingClientRect();
    const x = event.clientX - rect.left;

    if(x > rect.width / 2) {
      // Clicked on right half - next image
      const nextIndex = (currentIndex + 1) % totalImages;
      showImage(nextIndex, 'next');
    } else {
      // Clicked on left half - previous image
      const prevIndex = (currentIndex - 1 + totalImages) % totalImages;
      showImage(prevIndex, 'prev');
    }
  }

  createImageElements();

  tapOverlay.addEventListener('click', () => {
    startSlideshow();
  });

  slideshow.addEventListener('click', handleClick);
</script>

</body>
</html>
